
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/favicon.jpeg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.2.5">
    
    
      
        <title>HID报告描述符 - ieiao's Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hid" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="ieiao&#39;s Wiki" class="md-header__button md-logo" aria-label="ieiao's Wiki" data-md-component="logo">
      
  <img src="../../../assets/logo.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ieiao's Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HID报告描述符
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ieiao&#39;s Wiki" class="md-nav__button md-logo" aria-label="ieiao's Wiki" data-md-component="logo">
      
  <img src="../../../assets/logo.jpeg" alt="logo">

    </a>
    ieiao's Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        关于
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          笔记
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          工具
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="工具" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          工具
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/linux_tips/" class="md-nav__link">
        Linux Tips
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/pulseview/" class="md-nav__link">
        PulseView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/hexdump/" class="md-nav__link">
        hexdump
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/gcc/" class="md-nav__link">
        gcc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/make/" class="md-nav__link">
        make
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          嵌入式开发
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="嵌入式开发" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          嵌入式开发
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_1" type="checkbox" id="__nav_2_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_1">
          Linux内核
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux内核" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Linux内核
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/porting-to-new-soc/" class="md-nav__link">
        SOC移植实践
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../epaper/" class="md-nav__link">
        墨水屏
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rotary-encoder/" class="md-nav__link">
        旋转编码器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../amlogic/s905x/" class="md-nav__link">
        S905X
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rockchip/rk3128/" class="md-nav__link">
        RK3128
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          硬件
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="硬件" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          硬件
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fet/" class="md-nav__link">
        场效应管
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          项目
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="项目" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          项目
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../projects/serprog/" class="md-nav__link">
        serprog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../projects/epd-clock/" class="md-nav__link">
        Epd-Clock
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../blog-archive/" class="md-nav__link">
        博客/项目存档
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    报告描述符相关教程
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linuxhid" class="md-nav__link">
    Linux下查看设备HID
  </a>
  
    <nav class="md-nav" aria-label="Linux下查看设备HID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugfs" class="md-nav__link">
    使用debugfs查看
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usbutils" class="md-nav__link">
    使用usbutils进行查看
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-interface-descriptor" class="md-nav__link">
    Boot Interface Descriptor
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="hid">HID报告描述符<a class="headerlink" href="#hid" title="Permanent link">&para;</a></h1>
<h2 id="_1">报告描述符相关教程<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p><a href="https://eleccelerator.com/tutorial-about-usb-hid-report-descriptors/">Tutorial about USB HID Report Descriptors</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/27568561">USB HID报告描述符教程</a></p>
<h2 id="linuxhid">Linux下查看设备HID<a class="headerlink" href="#linuxhid" title="Permanent link">&para;</a></h2>
<blockquote>
<p>依赖<code>usbutils</code>和<code>hidrd</code>软件包，需要自行下载安装。</p>
</blockquote>
<h3 id="debugfs">使用debugfs查看<a class="headerlink" href="#debugfs" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="c1"># 直接导出描述符查看</span>
$<span class="w"> </span>cat<span class="w"> </span>/sys/kernel/debug/hid/0003<span class="se">\:</span>04F3<span class="se">\:</span><span class="m">0103</span>.0001/rdesc
<span class="m">05</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">09</span><span class="w"> </span><span class="m">06</span><span class="w"> </span>a1<span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">07</span><span class="w"> </span><span class="m">19</span><span class="w"> </span>e0<span class="w"> </span><span class="m">29</span><span class="w"> </span>e7<span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">26</span><span class="w"> </span>ff<span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">06</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>c0

<span class="w">  </span>INPUT<span class="o">[</span>INPUT<span class="o">]</span>
<span class="w">    </span>Field<span class="o">(</span><span class="m">0</span><span class="o">)</span>
<span class="w">      </span>Application<span class="o">(</span>GenericDesktop.Keyboard<span class="o">)</span>
<span class="w">      </span>Usage<span class="o">(</span><span class="m">8</span><span class="o">)</span>
<span class="w">        </span>Keyboard.00e0
<span class="w">        </span>Keyboard.00e1
<span class="w">        </span>Keyboard.00e2
<span class="w">        </span>Keyboard.00e3
<span class="w">        </span>Keyboard.00e4
<span class="w">        </span>Keyboard.00e5
<span class="w">        </span>Keyboard.00e6
<span class="w">        </span>Keyboard.00e7
<span class="w">      </span>Logical<span class="w"> </span>Minimum<span class="o">(</span><span class="m">0</span><span class="o">)</span>
<span class="w">      </span>Logical<span class="w"> </span>Maximum<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="w">      </span>Report<span class="w"> </span>Size<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="w">      </span>Report<span class="w"> </span>Count<span class="o">(</span><span class="m">8</span><span class="o">)</span>
<span class="w">      </span>Report<span class="w"> </span>Offset<span class="o">(</span><span class="m">0</span><span class="o">)</span>
<span class="w">      </span>Flags<span class="o">(</span><span class="w"> </span>Variable<span class="w"> </span>Absolute<span class="w"> </span><span class="o">)</span>
<span class="w">    </span>Field<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="w">      </span>Application<span class="o">(</span>GenericDesktop.Keyboard<span class="o">)</span>

<span class="w">  </span>...

$<span class="w"> </span><span class="c1"># 使用hidrd-convert工具转换格式</span>
$<span class="w"> </span>cat<span class="w"> </span>/sys/kernel/debug/hid/0003<span class="se">\:</span>04F3<span class="se">\:</span><span class="m">0103</span>.0001/rdesc<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>xxd<span class="w"> </span>-r<span class="w"> </span>-p<span class="w"> </span><span class="p">|</span><span class="w"> </span>hidrd-convert<span class="w"> </span>-o<span class="w"> </span>spec
Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Desktop<span class="o">)</span>,<span class="w">               </span><span class="p">;</span><span class="w"> </span>Generic<span class="w"> </span>desktop<span class="w"> </span>controls<span class="w"> </span><span class="o">(</span>01h<span class="o">)</span>
Usage<span class="w"> </span><span class="o">(</span>Keyboard<span class="o">)</span>,<span class="w">                   </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span><span class="o">(</span>06h,<span class="w"> </span>application<span class="w"> </span>collection<span class="o">)</span>
Collection<span class="w"> </span><span class="o">(</span>Application<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>LED<span class="o">)</span>,<span class="w">               </span><span class="p">;</span><span class="w"> </span>LEDs<span class="w"> </span><span class="o">(</span>08h<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>01h<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>03h<span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">3</span><span class="o">)</span>,
<span class="w">    </span>Output<span class="w"> </span><span class="o">(</span>Variable<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">5</span><span class="o">)</span>,
<span class="w">    </span>Output<span class="w"> </span><span class="o">(</span>Constant<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Keyboard<span class="o">)</span>,<span class="w">          </span><span class="p">;</span><span class="w"> </span>Keyboard/keypad<span class="w"> </span><span class="o">(</span>07h<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>Leftcontrol<span class="o">)</span>,<span class="w"> </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>left<span class="w"> </span>control<span class="w"> </span><span class="o">(</span>E0h,<span class="w"> </span>dynamic<span class="w"> </span>value<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>Right<span class="w"> </span>GUI<span class="o">)</span>,<span class="w">   </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>right<span class="w"> </span>GUI<span class="w"> </span><span class="o">(</span>E7h,<span class="w"> </span>dynamic<span class="w"> </span>value<span class="o">)</span>
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Variable<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Constant<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>None<span class="o">)</span>,<span class="w">           </span><span class="p">;</span><span class="w"> </span>No<span class="w"> </span>event<span class="w"> </span><span class="o">(</span>00h,<span class="w"> </span>selector<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>LANG2<span class="o">)</span>,<span class="w">       </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>LANG2<span class="w"> </span><span class="o">(</span>91h,<span class="w"> </span>selector<span class="o">)</span>
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">255</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">6</span><span class="o">)</span>,
<span class="w">    </span>Input,
End<span class="w"> </span>Collection
</code></pre></div>
<h3 id="usbutils">使用usbutils进行查看<a class="headerlink" href="#usbutils" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="c1"># 导出原始格式</span>
$<span class="w"> </span>usbhid-dump<span class="w"> </span>-d<span class="w"> </span>04f3<span class="w"> </span>-i<span class="w"> </span><span class="m">255</span>
<span class="m">006</span>:002:001:DESCRIPTOR<span class="w">         </span><span class="m">1668584980</span>.090532
<span class="w"> </span><span class="m">05</span><span class="w"> </span>0C<span class="w"> </span><span class="m">09</span><span class="w"> </span><span class="m">01</span><span class="w"> </span>A1<span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">85</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>2A<span class="w"> </span>3C<span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">26</span>
<span class="w"> </span>3C<span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>C0<span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">09</span><span class="w"> </span><span class="m">80</span><span class="w"> </span>A1<span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">85</span>
<span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">83</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">95</span>
<span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">01</span><span class="w"> </span>C0

<span class="m">006</span>:002:000:DESCRIPTOR<span class="w">         </span><span class="m">1668584980</span>.094501
<span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">09</span><span class="w"> </span><span class="m">06</span><span class="w"> </span>A1<span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">01</span>
<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">07</span><span class="w"> </span><span class="m">19</span><span class="w"> </span>E0<span class="w"> </span><span class="m">29</span><span class="w"> </span>E7
<span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">91</span><span class="w"> </span><span class="m">26</span><span class="w"> </span>FF
<span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="m">06</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>C0

$<span class="w"> </span><span class="c1"># 使用hidrd-convert工具转换格式</span>
$<span class="w"> </span>usbhid-dump<span class="w"> </span>-d<span class="w"> </span>04f3<span class="w"> </span>-i<span class="w"> </span><span class="m">255</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>:<span class="w"> </span><span class="p">|</span><span class="w"> </span>xxd<span class="w"> </span>-r<span class="w"> </span>-p<span class="w"> </span><span class="p">|</span><span class="w"> </span>hidrd-convert<span class="w"> </span>-o<span class="w"> </span>spec
Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Consumer<span class="o">)</span>,<span class="w">              </span><span class="p">;</span><span class="w"> </span>Consumer<span class="w"> </span><span class="o">(</span>0Ch<span class="o">)</span>
Usage<span class="w"> </span><span class="o">(</span>Consumer<span class="w"> </span>Control<span class="o">)</span>,<span class="w">           </span><span class="p">;</span><span class="w"> </span>Consumer<span class="w"> </span>control<span class="w"> </span><span class="o">(</span>01h,<span class="w"> </span>application<span class="w"> </span>collection<span class="o">)</span>
Collection<span class="w"> </span><span class="o">(</span>Application<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>ID<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>00h<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>AC<span class="w"> </span>Format<span class="o">)</span>,<span class="w">      </span><span class="p">;</span><span class="w"> </span>AC<span class="w"> </span>format<span class="w"> </span><span class="o">(</span>023Ch,<span class="w"> </span>selector<span class="o">)</span>
<span class="w">    </span>Logical<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">572</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">16</span><span class="o">)</span>,
<span class="w">    </span>Input,
End<span class="w"> </span>Collection,
Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Desktop<span class="o">)</span>,<span class="w">               </span><span class="p">;</span><span class="w"> </span>Generic<span class="w"> </span>desktop<span class="w"> </span>controls<span class="w"> </span><span class="o">(</span>01h<span class="o">)</span>
Usage<span class="w"> </span><span class="o">(</span>Sys<span class="w"> </span>Control<span class="o">)</span>,<span class="w">                </span><span class="p">;</span><span class="w"> </span>System<span class="w"> </span>control<span class="w"> </span><span class="o">(</span>80h,<span class="w"> </span>application<span class="w"> </span>collection<span class="o">)</span>
Collection<span class="w"> </span><span class="o">(</span>Application<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>ID<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>Sys<span class="w"> </span>Power<span class="w"> </span>Down<span class="o">)</span>,<span class="w"> </span><span class="p">;</span><span class="w"> </span>System<span class="w"> </span>power<span class="w"> </span>down<span class="w"> </span><span class="o">(</span>81h,<span class="w"> </span>one-shot<span class="w"> </span>control<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>Sys<span class="w"> </span>Wake<span class="w"> </span>Up<span class="o">)</span>,<span class="w">    </span><span class="p">;</span><span class="w"> </span>System<span class="w"> </span>wake<span class="w"> </span>up<span class="w"> </span><span class="o">(</span>83h,<span class="w"> </span>one-shot<span class="w"> </span>control<span class="o">)</span>
<span class="w">    </span>Logical<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">3</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Variable<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">5</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Constant<span class="o">)</span>,
End<span class="w"> </span>Collection,
Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Desktop<span class="o">)</span>,<span class="w">               </span><span class="p">;</span><span class="w"> </span>Generic<span class="w"> </span>desktop<span class="w"> </span>controls<span class="w"> </span><span class="o">(</span>01h<span class="o">)</span>
Usage<span class="w"> </span><span class="o">(</span>Keyboard<span class="o">)</span>,<span class="w">                   </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span><span class="o">(</span>06h,<span class="w"> </span>application<span class="w"> </span>collection<span class="o">)</span>
Collection<span class="w"> </span><span class="o">(</span>Application<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>LED<span class="o">)</span>,<span class="w">               </span><span class="p">;</span><span class="w"> </span>LEDs<span class="w"> </span><span class="o">(</span>08h<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>01h<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>03h<span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span>,
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">3</span><span class="o">)</span>,
<span class="w">    </span>Output<span class="w"> </span><span class="o">(</span>Variable<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">5</span><span class="o">)</span>,
<span class="w">    </span>Output<span class="w"> </span><span class="o">(</span>Constant<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Page<span class="w"> </span><span class="o">(</span>Keyboard<span class="o">)</span>,<span class="w">          </span><span class="p">;</span><span class="w"> </span>Keyboard/keypad<span class="w"> </span><span class="o">(</span>07h<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>Leftcontrol<span class="o">)</span>,<span class="w"> </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>left<span class="w"> </span>control<span class="w"> </span><span class="o">(</span>E0h,<span class="w"> </span>dynamic<span class="w"> </span>value<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>Right<span class="w"> </span>GUI<span class="o">)</span>,<span class="w">   </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>right<span class="w"> </span>GUI<span class="w"> </span><span class="o">(</span>E7h,<span class="w"> </span>dynamic<span class="w"> </span>value<span class="o">)</span>
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Variable<span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Size<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>,
<span class="w">    </span>Input<span class="w"> </span><span class="o">(</span>Constant<span class="o">)</span>,
<span class="w">    </span>Usage<span class="w"> </span>Minimum<span class="w"> </span><span class="o">(</span>None<span class="o">)</span>,<span class="w">           </span><span class="p">;</span><span class="w"> </span>No<span class="w"> </span>event<span class="w"> </span><span class="o">(</span>00h,<span class="w"> </span>selector<span class="o">)</span>
<span class="w">    </span>Usage<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span>KB<span class="w"> </span>LANG2<span class="o">)</span>,<span class="w">       </span><span class="p">;</span><span class="w"> </span>Keyboard<span class="w"> </span>LANG2<span class="w"> </span><span class="o">(</span>91h,<span class="w"> </span>selector<span class="o">)</span>
<span class="w">    </span>Logical<span class="w"> </span>Maximum<span class="w"> </span><span class="o">(</span><span class="m">255</span><span class="o">)</span>,
<span class="w">    </span>Report<span class="w"> </span>Count<span class="w"> </span><span class="o">(</span><span class="m">6</span><span class="o">)</span>,
<span class="w">    </span>Input,
End<span class="w"> </span>Collection
</code></pre></div>
<h2 id="boot-interface-descriptor">Boot Interface Descriptor<a class="headerlink" href="#boot-interface-descriptor" title="Permanent link">&para;</a></h2>
<p>USB HID规范中写到 <strong>Set_Protocol Request</strong> 可以在boot protocol和report protocol中进行切换。</p>
<p>一般来说，固件（比如UEFI）中对USB键盘只支持boot protocol，在对USB键盘的初始化流程中会使用 <strong>Set_Protocol Request</strong> 将键盘设置为boot protocol，boot protocol的定义是兼容report protocol的，在HID规范附录B.2中提供了一个描述符可以直接使用，描述符内容如下</p>
<div class="highlight"><pre><span></span><code>Usage Page (Generic Desktop),
Usage (Keyboard),
Collection (Application),
  Report Size (1),
  Report Count (8),
  Usage Page (Key Codes),
  Usage Minimum (224),
  Usage Maximum (231),
  Logical Minimum (0),
  Logical Maximum (1),
  Input (Data, Variable, Absolute),
  Report Count (1),
  Report Size (8),
  Input (Constant),
  Report Count (5),
  Report Size (1),
  Usage Page (LEDs),
  Usage Minimum (1),
  Usage Maximum (5),
  Output (Data, Variable, Absolute),
  Report Count (1),
  Report Size (3),
  Output (Constant),
  Report Count (6),
  Report Size (8),
  Logical Minimum (0),
  Logical Maximum(255),
  Usage Page (Key Codes),
  Usage Minimum (0),
  Usage Maximum (255),
  Input (Data, Array),
End Collection
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.bd0b6b67.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>